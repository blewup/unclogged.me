<!DOCTYPE html>
<html lang="fr" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <title>Calendrier & Disponibilités | Déboucheur Expert</title>
    <meta lang="fr" name="description" content="Calendrier des disponibilités et tarification selon l'horaire - Déboucheur Expert. Consultez les multiplicateurs de prix et planifiez votre rendez-vous.">
    <meta lang="en" name="description" content="Availability calendar and time-based pricing - Déboucheur Expert. Check price multipliers and schedule your plumbing appointment.">
    
    <!-- Preload hero slides -->
    <link rel="preload" as="image" href="../assets/images/slide/slide_06.webp">
    <link rel="preload" as="image" href="../assets/images/slide/slide_07.webp">
    <link rel="preload" as="image" href="../assets/images/slide/slide_08.webp">
    <link rel="preload" as="image" href="../assets/images/slide/slide_09.webp">
    <link rel="preload" as="image" href="../assets/images/slide/slide_10.webp">
    <link rel="preload" as="image" href="../assets/images/slide/slide_11.webp">
    
    <!-- Security & Performance Headers -->
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <!-- Extended Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/images/logo/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/images/logo/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/images/logo/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/images/logo/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/images/logo/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/images/logo/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/images/logo/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/images/logo/apple-touch-icon-152x152.png">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon-196x196.png" sizes="196x196">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../assets/images/logo/favicon-128.png" sizes="128x128">
    <link href="../assets/images/logo/favicon.ico" rel="icon" type="image/x-icon">
    <meta lang="fr" name="application-name" content="Déboucheur Expert">
    <meta lang="en" name="application-name" content="Unclogged Me">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="../assets/images/logo/mstile-144x144.png">

    <!-- PWA Manifest -->
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#2563EB">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Local Fonts (NO external CDN) -->
    <link rel="stylesheet" href="../assets/styles/fonts.css">
    <link rel="stylesheet" href="../assets/styles/idex.css">
    <link rel="stylesheet" href="../assets/styles/tailwind.css">
    <link rel="stylesheet" href="../assets/styles/panda.css">
    <link rel="stylesheet" href="../assets/styles/events.css">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkBase: '#000000',
                        darkAlt: '#131313',
                        lightBase: '#FFFFFF',
                        lightAlt: '#F2F2F2',
                        cardinal: '#C41E3A',
                        green: '#22c55e',
                        blue: '#2563EB',
                    },
                    fontFamily: {
                        ops: ['"Black Ops One"', 'cursive'],
                        impact: ['Impact', 'Haettenschweiler', 'Arial Narrow Bold', 'sans-serif'],
                        comic: ['"Comic Sans MS"', '"Comic Sans"', 'cursive', 'sans-serif'],
                        playfair: ['"Playfair Display"', 'serif'],
                        merriweather: ['Merriweather', 'serif'],
                        inter: ['Inter', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                        jakarta: ['"Plus Jakarta Sans"', 'sans-serif'],
                    },
                    screens: {
                        'portrait': {'raw': '(orientation: portrait)'},
                        'landscape': {'raw': '(orientation: landscape)'},
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                    }
                }
            }
        }
    </script>
    
    <!-- Structured Data (English) -->
    <script lang="en" type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Unclogged by Déboucheur Expert",
      "alternateName": "unclogged.me",
      "description": "Anything related to residential plumbing service calls: unclogging drains, fixing leaks, troubleshooting water loss. Certain tasks require the city and a certified master plumber. No new construction; our service focuses on maintenance and emergency repairs.",
      "url": "https://unclogged.me",
      "logo": "https://unclogged.me/assets/images/logo/logo.png",
      "image": "https://unclogged.me/assets/images/slide/slide_01.webp",
      "telephone": "+1-438-530-2343",
      "priceRange": "200$ - 640$/h CAD +tx",
      "areaServed": ["Montreal", "Montérégie"],
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "290 Rue Lord #01",
        "addressLocality": "Napierville",
        "addressRegion": "QC",
        "postalCode": "J0J 1L0",
        "addressCountry": "CA"
      },
      "openingHoursSpecification": [
        {"@type": "OpeningHoursSpecification", "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday"], "opens": "08:00", "closes": "18:00"},
        {"@type": "OpeningHoursSpecification", "dayOfWeek": ["Saturday","Sunday"], "opens": "08:00", "closes": "17:00"}
      ]
    }
    </script>
    
    <!-- Structured Data (French) -->
    <script lang="fr" type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Déboucheur Expert (unclogged.me)",
      "alternateName": "Déboucheur",
      "description": "Tout ce qui concerne les appels de service de plomberie résidentielle : débouchage des drains, réparation des fuites, dépannage des pertes d'eau. Certaines tâches nécessitent la ville et un maître plombier certifié. Pas de nouvelle construction ; notre service se concentre sur l'entretien et les réparations d'urgence.",
      "url": "https://deboucheur.expert",
      "logo": "https://deboucheur.expert/assets/images/logo/logo.png",
      "image": "https://deboucheur.expert/assets/images/slide/slide_01.webp",
      "telephone": "+1-438-530-2343",
      "priceRange": "200$ - 640$/h CAD +tx",
      "areaServed": ["Montreal", "Montérégie"],
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "290 Rue Lord #01",
        "addressLocality": "Napierville",
        "addressRegion": "QC",
        "postalCode": "J0J 1L0",
        "addressCountry": "CA"
      },
      "openingHoursSpecification": [
        {"@type": "OpeningHoursSpecification", "dayOfWeek": ["Monday","Tuesday","Wednesday","Thursday","Friday"], "opens": "08:00", "closes": "18:00"},
        {"@type": "OpeningHoursSpecification", "dayOfWeek": ["Saturday","Sunday"], "opens": "08:00", "closes": "17:00"}
      ]
    }
    </script>
</head>
<body class="bg-lightBase dark:bg-darkBase text-gray-800 dark:text-gray-100 font-comic">

    <!-- Dynamic Component Containers -->
    <div id="pages-navbar-container"></div>

    <!-- Hero Section with Slideshow -->
    <div id="pages-hero-container"></div>

    <!-- Pricing Legend Section -->
    <section class="py-8 px-4 bg-lightAlt dark:bg-darkAlt" style="margin-top: 6vh;">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-2xl md:text-3xl font-ops text-center mb-8 text-gray-900 dark:text-white">
                <svg class="w-8 h-8 inline-block mr-2 text-blue" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/></svg>
                <span data-translate="pricing_legend_title">LÉGENDE DES TARIFS</span>
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- X1 - Standard -->
                <div class="legend-card">
                    <div class="legend-item">
                        <div class="legend-color bg-green/30 border-2 border-green text-green">X1</div>
                        <div>
                            <h3 class="font-ops text-lg text-green" data-translate="rate_standard">STANDARD</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" data-translate="rate_standard_desc">Lun-Ven 8h-16h</p>
                            <p class="text-xs text-gray-500 mt-1" data-translate="rate_standard_hours">Heures régulières</p>
                        </div>
                    </div>
                </div>
                
                <!-- X1.5 - Extended -->
                <div class="legend-card">
                    <div class="legend-item">
                        <div class="legend-color bg-yellow-500/30 border-2 border-yellow-500 text-yellow-500">X1.5</div>
                        <div>
                            <h3 class="font-ops text-lg text-yellow-500" data-translate="rate_extended">PROLONGÉ</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" data-translate="rate_extended_desc">4h-8h & 16h-20h</p>
                            <p class="text-xs text-gray-500 mt-1" data-translate="rate_extended_hours">Heures étendues</p>
                        </div>
                    </div>
                </div>
                
                <!-- X2 - Premium -->
                <div class="legend-card">
                    <div class="legend-item">
                        <div class="legend-color bg-orange-500/30 border-2 border-orange-500 text-orange-500">X2</div>
                        <div>
                            <h3 class="font-ops text-lg text-orange-500" data-translate="rate_premium">PREMIUM</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" data-translate="rate_premium_desc">Soirs & Fins de semaine</p>
                            <p class="text-xs text-gray-500 mt-1" data-translate="rate_premium_hours">20h-4h & Sam-Dim</p>
                        </div>
                    </div>
                </div>
                
                <!-- X3 - Emergency -->
                <div class="legend-card">
                    <div class="legend-item">
                        <div class="legend-color bg-cardinal/30 border-2 border-cardinal text-cardinal">X3</div>
                        <div>
                            <h3 class="font-ops text-lg text-cardinal" data-translate="rate_emergency">URGENCE</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" data-translate="rate_emergency_desc">Jours fériés</p>
                            <p class="text-xs text-gray-500 mt-1" data-translate="rate_emergency_hours">Fêtes officielles QC</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Base rate info -->
            <div class="mt-6 text-center p-4 bg-blue/10 border border-blue/30 rounded-xl">
                <p class="font-ops text-blue text-lg" data-translate="base_rate_info">
                    TARIF DE BASE: 200$ - 640$/h CAD + taxes
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2" data-translate="base_rate_note">
                    Les multiplicateurs s'appliquent selon l'heure et le jour du service
                </p>
            </div>
        </div>
    </section>

    <!-- 6-Month Calendar Grid -->
    <section id="calendar" class="py-12 px-4 bg-lightBase dark:bg-darkBase">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-2xl md:text-3xl font-ops text-center mb-8 text-gray-900 dark:text-white">
                <svg class="w-8 h-8 inline-block mr-2 text-blue" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg>
                <span data-translate="calendar_title">CALENDRIER DES 6 PROCHAINS MOIS</span>
            </h2>
            
            <div id="calendar-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Calendars injected by JS -->
            </div>
        </div>
    </section>

    <!-- Holiday List -->
    <section class="py-12 px-4 bg-lightAlt dark:bg-darkAlt">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-2xl md:text-3xl font-ops text-center mb-8 text-gray-900 dark:text-white">
                <svg class="w-8 h-8 inline-block mr-2 text-cardinal" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                <span data-translate="holidays_title">JOURS FÉRIÉS (X3)</span>
            </h2>
            
            <div id="holiday-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Holiday list injected by JS -->
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 px-4 bg-gradient-to-r from-blue to-blue/80">
        <div class="max-w-4xl mx-auto text-center text-white">
            <h2 class="text-3xl md:text-4xl font-ops mb-4" data-translate="cta_title">BESOIN D'UN RENDEZ-VOUS?</h2>
            <p class="text-xl mb-8 opacity-90" data-translate="cta_desc">Appelez-nous pour planifier une intervention</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="tel:+14385302343" class="bg-white text-blue font-ops px-8 py-4 rounded-xl text-xl hover:bg-gray-100 transition flex items-center justify-center gap-3 shadow-lg">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/></svg>
                    (438) 530-2343
                </a>
                <a href="../index.html#contact" class="bg-cardinal text-white font-ops px-8 py-4 rounded-xl text-xl hover:bg-red-700 transition flex items-center justify-center gap-3 shadow-lg border-2 border-white/30">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/></svg>
                    <span data-translate="cta_form">Formulaire</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer Container -->
    <div id="pages-footer-container"></div>

    <!-- Dynamic Components -->
    <div id="pages-banner-container"></div>
    <div id="pages-helper-container"></div>

    <script>
        // Theme detection
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.classList.remove('dark');
        } else if (localStorage.getItem('theme') === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }

        // Hero slideshow
        let currentSlide = 0;
        const slides = document.querySelectorAll('.hero-slide');
        
        function nextSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }
        
        setInterval(nextSlide, 6000);

        // Quebec statutory holidays (X3 rate)
        const holidays = {
            '2025-01-01': { name: 'Jour de l\'An', type: 'holiday' },
            '2025-04-18': { name: 'Vendredi saint', type: 'holiday' },
            '2025-05-19': { name: 'Journée nationale des patriotes', type: 'holiday' },
            '2025-06-24': { name: 'Fête nationale du Québec', type: 'holiday' },
            '2025-07-01': { name: 'Fête du Canada', type: 'holiday' },
            '2025-09-01': { name: 'Fête du Travail', type: 'holiday' },
            '2025-10-13': { name: 'Action de grâce', type: 'holiday' },
            '2025-12-25': { name: 'Noël', type: 'holiday' },
            '2026-01-01': { name: 'Jour de l\'An', type: 'holiday' },
            '2026-04-03': { name: 'Vendredi saint', type: 'holiday' },
            '2026-05-18': { name: 'Journée nationale des patriotes', type: 'holiday' },
            '2026-06-24': { name: 'Fête nationale du Québec', type: 'holiday' },
            '2026-07-01': { name: 'Fête du Canada', type: 'holiday' },
            '2026-09-07': { name: 'Fête du Travail', type: 'holiday' },
            '2026-10-12': { name: 'Action de grâce', type: 'holiday' },
            '2026-12-25': { name: 'Noël', type: 'holiday' },
        };

        const monthNames = [
            'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin',
            'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'
        ];

        const dayNames = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];

        function formatDateKey(year, month, day) {
            return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        }

        function getPriceClass(dayOfWeek, dateKey) {
            // X3 - Holidays
            if (holidays[dateKey]) return 'x3';
            // X2 - Weekends
            if (dayOfWeek === 0 || dayOfWeek === 6) return 'x2';
            // X1 - Weekdays (standard hours shown as green)
            return 'x1';
        }

        function generateCalendar(year, month) {
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            const today = new Date();

            let html = `
                <div class="month-card">
                    <h3 class="text-center font-ops text-xl mb-4 text-gray-900 dark:text-white">${monthNames[month]} ${year}</h3>
                    <div class="calendar-grid">
            `;

            // Day headers
            dayNames.forEach(day => {
                html += `<div class="calendar-header">${day}</div>`;
            });

            // Empty cells before first day
            for (let i = 0; i < startDay; i++) {
                html += `<div class="calendar-day opacity-0"></div>`;
            }

            // Days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateKey = formatDateKey(year, month, day);
                const dayOfWeek = new Date(year, month, day).getDay();
                const isToday = today.getFullYear() === year && today.getMonth() === month && today.getDate() === day;
                const priceClass = getPriceClass(dayOfWeek, dateKey);
                const holiday = holidays[dateKey];

                let classes = `calendar-day ${priceClass}`;
                if (isToday) classes += ' today';

                const tooltip = holiday 
                    ? `<span class="day-tooltip">${holiday.name} (X3)</span>`
                    : priceClass === 'x2' 
                        ? `<span class="day-tooltip">Fin de semaine (X2)</span>`
                        : `<span class="day-tooltip">Standard (X1)</span>`;

                html += `
                    <div class="${classes}">
                        <span class="font-bold">${day}</span>
                        ${holiday ? `<span class="text-[7px] text-cardinal font-bold">X3</span>` : ''}
                        ${tooltip}
                    </div>
                `;
            }

            html += `</div></div>`;
            return html;
        }

        function generateHolidayList() {
            const now = new Date();
            const sixMonthsLater = new Date(now.getFullYear(), now.getMonth() + 6, 0);
            
            const upcomingHolidays = Object.entries(holidays)
                .filter(([date]) => {
                    const d = new Date(date);
                    return d >= now && d <= sixMonthsLater;
                })
                .sort(([a], [b]) => new Date(a) - new Date(b));

            let html = '';
            upcomingHolidays.forEach(([date, info]) => {
                const d = new Date(date);
                html += `
                    <div class="flex items-center gap-4 p-4 rounded-xl bg-cardinal/10 border border-cardinal/30 hover:bg-cardinal/20 transition">
                        <div class="text-center bg-cardinal text-white p-3 rounded-lg min-w-[60px]">
                            <div class="font-ops text-2xl">${d.getDate()}</div>
                            <div class="text-xs uppercase">${monthNames[d.getMonth()].slice(0, 3)}</div>
                        </div>
                        <div>
                            <div class="font-ops text-lg text-gray-900 dark:text-white">${info.name}</div>
                            <div class="text-sm text-cardinal font-bold">Tarif X3</div>
                        </div>
                    </div>
                `;
            });
            
            if (upcomingHolidays.length === 0) {
                html = '<p class="text-center text-gray-500 col-span-2">Aucun jour férié dans les 6 prochains mois</p>';
            }
            
            return html;
        }

        // Generate calendars for next 6 months
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('calendar-container');
            const today = new Date();
            let html = '';

            for (let i = 0; i < 6; i++) {
                const date = new Date(today.getFullYear(), today.getMonth() + i, 1);
                html += generateCalendar(date.getFullYear(), date.getMonth());
            }

            container.innerHTML = html;
            document.getElementById('holiday-list').innerHTML = generateHolidayList();
        });
    </script>

    <!-- Core Libraries -->
    <script src="../assets/scripts/libs.js" defer></script>
    <script src="../assets/scripts/main.js" defer></script>
    <script src="../assets/scripts/time.js" defer></script>
    <script src="../assets/scripts/components/loader.js"></script>
    <script src="../assets/scripts/icons.js" defer></script>
</body>
</html>
